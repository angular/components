<div
  class="example-select"
  ngCombobox
  #combobox="ngCombobox"
  tabindex="0"
  [(expanded)]="popupExpanded"
>
  <span class="example-combobox-text">{{value()}}</span>
  <span class="example-arrow material-symbols-outlined">arrow_drop_down</span>
</div>

<ng-template
  [cdkConnectedOverlay]="{origin: combobox.element, usePopover: 'inline', matchWidth: true}"
  [cdkConnectedOverlayOpen]="true"
  [cdkConnectedOverlayDisableClose]="true"
>
  <ng-template ngComboboxPopup [combobox]="combobox">
    <div class="example-popup-container">
      <div
        ngListbox
        ngComboboxWidget
        class="example-listbox"
        focusMode="activedescendant"
        selectionMode="explicit"
        [(values)]="selectedValues"
        (click)="onCommit()"
        (keydown.enter)="onCommit()"
        (keydown.space)="onCommit()"
      >
        @for (option of options(); track option.value) {
          <div class="example-option" ngOption [value]="option.value" [label]="option.value">
            @if (option.icon) {
              <span class="example-option-icon material-symbols-outlined">{{option.icon}}</span>
            }
            <span class="example-option-text">{{option.value}}</span>
            @if (selectedValues().includes(option.value)) {
              <span aria-hidden="true" class="example-option-check material-symbols-outlined"
                >check</span
              >
            }
          </div>
        }
      </div>
    </div>
  </ng-template>
</ng-template>
