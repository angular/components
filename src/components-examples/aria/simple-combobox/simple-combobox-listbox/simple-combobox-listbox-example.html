<div class="example-combobox-container">
  <div #origin class="example-combobox-input-container">
    <span class="material-symbols-outlined example-icon example-search-icon">search</span>
    <input
      ngCombobox
      #combobox="ngCombobox"
      class="example-combobox-input"
      placeholder="Search..."
      [(value)]="searchString"
      [(expanded)]="popupExpanded"
    />
  </div>

  <ng-template
    [cdkConnectedOverlay]="{origin, usePopover: 'inline', matchWidth: true}"
    [cdkConnectedOverlayOpen]="true"
    [cdkConnectedOverlayDisableClose]="true"
  >
    <ng-template ngComboboxPopup [combobox]="combobox">
      <div
        ngListbox
        ngComboboxWidget
        class="example-listbox example-popup"
        focusMode="activedescendant"
        selectionMode="explicit"
        [(values)]="selectedOption"
        (click)="onCommit()"
        (keydown.enter)="onCommit()"
      >
        @for (option of options(); track option) {
          <div
            class="example-option example-selectable example-stateful"
            ngOption
            [value]="option"
            [label]="option"
          >
            <span>{{option}}</span>
            <span
              aria-hidden="true"
              class="material-symbols-outlined example-icon example-selected-icon"
              >check</span
            >
          </div>
        }
      </div>
    </ng-template>
  </ng-template>
</div>
