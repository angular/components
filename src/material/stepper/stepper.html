<!--
  We need to project the content somewhere to avoid hydration errors. Some observations:
  1. This is only necessary on the server.
  2. We get a hydration error if there aren't any nodes after the `ng-content`.
  3. We get a hydration error if `ng-content` is wrapped in another element.
-->
@if (_isServer) {
  <ng-content/>
}

@switch (orientation) {
  @case ('horizontal') {
    <div class="mat-horizontal-stepper-wrapper">
      <div class="mat-horizontal-stepper-header-container" role="tablist">
        @for (step of steps; track step) {
          <mat-step-header
            class="mat-horizontal-stepper-header"
            role="tab"
            (click)="step.select()"
            (keydown)="_onKeydown($event)"
            [tabIndex]="_getFocusIndex() === $index ? 0 : -1"
            [id]="_getStepLabelId($index)"
            [attr.aria-posinset]="$index + 1"
            [attr.aria-setsize]="steps.length"
            [attr.aria-controls]="_getStepContentId($index)"
            [attr.aria-owns]="_getStepContentId($index)"
            [attr.aria-selected]="selectedIndex == $index"
            [attr.aria-label]="step.ariaLabel || null"
            [attr.aria-labelledby]="(!step.ariaLabel && step.ariaLabelledby) ? step.ariaLabelledby : null"
            [attr.aria-disabled]="_stepIsNavigable($index, step) ? null : true"
            [index]="$index"
            [state]="_getIndicatorType($index, step.state)"
            [label]="step.stepLabel || step.label"
            [selected]="selectedIndex === $index"
            [active]="_stepIsNavigable($index, step)"
            [optional]="step.optional"
            [errorMessage]="step.errorMessage"
            [iconOverrides]="_iconOverrides"
            [disableRipple]="disableRipple || !_stepIsNavigable($index, step)"
            [color]="step.color || color"/>
          @if (!$last) {
            <div class="mat-stepper-horizontal-line"></div>
          }
        }
      </div>

      <div class="mat-horizontal-content-container">
        @for (step of steps; track step) {
          <div
            #animatedContainer
            class="mat-horizontal-stepper-content"
            role="tabpanel"
            [id]="_getStepContentId($index)"
            [attr.aria-labelledby]="_getStepLabelId($index)"
            [class]="'mat-horizontal-stepper-content-' + _getAnimationDirection($index)"
            [attr.inert]="selectedIndex === $index ? null : ''">
            <ng-container [ngTemplateOutlet]="step.content"/>
          </div>
        }
      </div>
    </div>
  }

  @case ('vertical') {
    <div class="mat-vertical-stepper-wrapper" role="group">
      @for (step of steps; track step) {
        <div class="mat-step">
          <mat-step-header
            class="mat-vertical-stepper-header"
            role="button"
            (click)="step.select()"
            (keydown)="_onKeydown($event)"
            [tabIndex]="_getFocusIndex() === $index ? 0 : -1"
            [id]="_getStepLabelId($index)"
            [attr.aria-expanded]="selectedIndex === $index"
            [attr.aria-pressed]="selectedIndex == $index"
            [attr.aria-controls]="_getStepContentId($index)"
            [attr.aria-current]="selectedIndex == $index"
            [attr.aria-label]="step.ariaLabel || null"
            [attr.aria-labelledby]="(!step.ariaLabel && step.ariaLabelledby) ? step.ariaLabelledby : _getStepLabelId($index)"
            [attr.aria-disabled]="_stepIsNavigable($index, step) ? null : true"
            [index]="$index"
            [state]="_getIndicatorType($index, step.state)"
            [label]="step.stepLabel || step.label"
            [selected]="selectedIndex === $index"
            [active]="_stepIsNavigable($index, step)"
            [optional]="step.optional"
            [errorMessage]="step.errorMessage"
            [iconOverrides]="_iconOverrides"
            [disableRipple]="disableRipple || !_stepIsNavigable($index, step)"
            [color]="step.color || color"/>
          <div
            #animatedContainer
            class="mat-vertical-content-container"
            [class.mat-stepper-vertical-line]="!$last"
            [class.mat-vertical-content-container-active]="selectedIndex === $index"
            [attr.inert]="selectedIndex === $index ? null : ''">
            <div class="mat-vertical-stepper-content"
              role="region"
              [id]="_getStepContentId($index)"
              [attr.aria-labelledby]="_getStepLabelId($index)">
              <div class="mat-vertical-content">
                <ng-container [ngTemplateOutlet]="step.content"/>
              </div>
            </div>
          </div>
        </div>
      }
    </div>
  }
}
